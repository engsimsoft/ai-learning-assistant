# Урок 1.3: JSON - формат данных

> **Модуль 1:** Основы веб-архитектуры  
> **Урок:** 1.3  
> **Длительность:** 45-60 минут  
> **Prerequisite:** Урок 1.1 (Client-Server), Урок 1.2 (HTTP)

---

## 🎯 Цели урока

После этого урока ты сможешь:
- ✅ Понимать что такое JSON и зачем он нужен
- ✅ Читать JSON структуры (объекты и массивы)
- ✅ Знать все типы данных в JSON
- ✅ Понимать синтаксис JSON (кавычки, запятые, скобки)
- ✅ Представлять как данные EngineCamPro выглядят в JSON

---

## 📖 Концепция: Что такое JSON?

### Простое определение

**JSON** (JavaScript Object Notation) - это **текстовый формат** для передачи структурированных данных.

**Важно:** JSON - это НЕ язык программирования! Это просто способ записать данные в текстовом виде, понятный и для человека, и для программы.

### 📋 Аналогия: Бланк анкеты

Представь бланк анкеты в больнице:

```
┌─────────────────────────────────────────────────────────┐
│                   АНКЕТА ПАЦИЕНТА                       │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ИМЯ:         [ Иван Петров      ]                     │
│  ВОЗРАСТ:     [ 35               ]                     │
│  ГОРОД:       [ Москва           ]                     │
│  РОСТ:        [ 180              ]                     │
│  АЛЛЕРГИИ:    [ Нет              ]                     │
│                                                         │
│  КОНТАКТЫ:                                              │
│    Телефон:   [ +7 999 123-45-67 ]                     │
│    Email:     [ ivan@mail.ru      ]                     │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**JSON - это то же самое, но в текстовом виде:**

```json
{
  "имя": "Иван Петров",
  "возраст": 35,
  "город": "Москва",
  "рост": 180,
  "аллергии": null,
  "контакты": {
    "телефон": "+7 999 123-45-67",
    "email": "ivan@mail.ru"
  }
}
```

**Ключевые особенности:**
- ✅ Структурированно (понятно где что)
- ✅ Читабельно (человек может прочитать)
- ✅ Машиночитаемо (программа легко парсит)
- ✅ Текстовый формат (можно отправить по интернету)

---

## 🌐 Зачем нужен JSON?

### Проблема: Как передать данные между программами?

**Ситуация:**
- Frontend (JavaScript) работает в браузере
- Backend (Python) работает на сервере
- Им нужно обмениваться данными

**Проблема:**
- У JavaScript свой формат данных
- У Python свой формат данных
- Как им понимать друг друга?

**Решение: JSON!**
- Универсальный формат
- Понимают все языки программирования
- Легко читается и пишется

### 🌍 Аналогия: Международный язык

```
┌─────────────────────────────────────────────────────────┐
│              БЕЗ ОБЩЕГО ЯЗЫКА                           │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  Русский программист:   "Проект, название, описание"   │
│                              ↓                          │
│                           ??? ❌                         │
│                              ↓                          │
│  Английский программист: "Project, name, description"  │
│                                                         │
│  Не понимают друг друга!                                │
│                                                         │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│              С JSON (общий язык)                        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  JavaScript:   {"name": "My Project"}                   │
│                         ↓                               │
│                      JSON ✅                             │
│                         ↓                               │
│  Python:       {"name": "My Project"}                   │
│                                                         │
│  Все понимают JSON!                                     │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 🏗️ Структура JSON

JSON состоит из двух основных структур:

### 1️⃣ Объект (Object) - { }

**Что это:** Набор пар **"ключ": значение**

**Синтаксис:**
```json
{
  "ключ1": значение1,
  "ключ2": значение2,
  "ключ3": значение3
}
```

**Пример:**
```json
{
  "name": "Aggressive Cam",
  "lift": 11.5,
  "duration": 280
}
```

**Аналогия:** Словарь с определениями
- **"name"** - это слово, **"Aggressive Cam"** - определение
- **"lift"** - слово, **11.5** - определение

**Ключевые правила:**
- ✅ Ключ **всегда в двойных кавычках**: `"name"`
- ✅ После ключа ставится **двоеточие**: `"name":`
- ✅ Между парами ставится **запятая**: `"name": "...", "lift": ...`
- ❌ После последней пары **запятой НЕТ**

---

### 2️⃣ Массив (Array) - [ ]

**Что это:** Упорядоченный список значений

**Синтаксис:**
```json
[значение1, значение2, значение3]
```

**Пример:**
```json
["Project A", "Project B", "Project C"]
```

**Или массив объектов:**
```json
[
  {"name": "Project A", "id": 1},
  {"name": "Project B", "id": 2},
  {"name": "Project C", "id": 3}
]
```

**Аналогия:** Список покупок
```
Список покупок:
1. Хлеб
2. Молоко
3. Яйца

JSON массив:
["Хлеб", "Молоко", "Яйца"]
```

**Ключевые правила:**
- ✅ Значения разделяются **запятой**
- ✅ Порядок имеет значение (первый, второй, третий...)
- ❌ После последнего значения **запятой НЕТ**

---

## 🎨 Типы данных в JSON

JSON поддерживает **6 типов данных**:

### 1️⃣ String (Строка) - текст

**Синтаксис:** Всегда в **двойных кавычках**

```json
{
  "name": "EngineCamPro",
  "description": "Cam design software",
  "author": "Владимир"
}
```

**Правила:**
- ✅ Только двойные кавычки `"текст"`
- ❌ Одинарные кавычки НЕ работают: `'текст'` ❌
- ✅ Можно использовать любые символы, включая русские

---

### 2️⃣ Number (Число) - целые и дробные

**Синтаксис:** Без кавычек

```json
{
  "lift": 11.5,
  "duration": 280,
  "rpm": 6000,
  "temperature": -15
}
```

**Правила:**
- ✅ Целые числа: `280`
- ✅ Дробные числа: `11.5` (точка, не запятая!)
- ✅ Отрицательные: `-15`
- ❌ Не в кавычках (иначе это строка)

**Важно:**
```json
"lift": 11.5    ← число ✅
"lift": "11.5"  ← строка ❌ (в кавычках)
```

---

### 3️⃣ Boolean (Логический) - true/false

**Синтаксис:** Только `true` или `false` (маленькими буквами, без кавычек)

```json
{
  "isActive": true,
  "isDeleted": false,
  "isPremium": true
}
```

**Правила:**
- ✅ Маленькими буквами: `true`, `false`
- ❌ Не с большой: `True`, `False` ❌
- ❌ Не в кавычках: `"true"` - это строка, не boolean

**Аналогия:**
- `true` = "Да" = 1 = включено
- `false` = "Нет" = 0 = выключено

---

### 4️⃣ Null (Пусто) - отсутствие значения

**Синтаксис:** Просто `null`

```json
{
  "description": null,
  "deletedAt": null
}
```

**Что это значит:**
- Поле существует, но значения пока нет
- Не то же самое что пустая строка `""`
- Не то же самое что число `0`

**Аналогия:**
- **null** = "Не заполнено" в анкете
- **Пустая строка** `""` = написал, но ничего не написал
- **Ноль** `0` = написал число ноль

**Примеры:**
```json
{
  "description": null,      ← Описания нет
  "description": "",        ← Описание есть, но пустое
  "count": 0,               ← Счётчик равен нулю
  "count": null             ← Счётчика нет вообще
}
```

---

### 5️⃣ Array (Массив) - список значений

**Синтаксис:** Квадратные скобки `[ ]`

```json
{
  "tags": ["aggressive", "street", "performance"],
  "measurements": [0.0, 1.5, 3.0, 4.5],
  "users": [
    {"name": "Ivan", "age": 30},
    {"name": "Anna", "age": 25}
  ]
}
```

**Что можно хранить:**
- ✅ Строки
- ✅ Числа
- ✅ Boolean значения
- ✅ Объекты
- ✅ Другие массивы (вложенные)

---

### 6️⃣ Object (Объект) - вложенная структура

**Синтаксис:** Фигурные скобки `{ }`

```json
{
  "project": {
    "id": 123,
    "name": "My Engine",
    "cams": {
      "intake": {"lift": 11.5},
      "exhaust": {"lift": 10.8}
    }
  }
}
```

**Вложенность:**
Объекты могут содержать другие объекты, массивы, и так далее - без ограничений по глубине.

---

## 🔧 Синтаксис JSON

### Правила написания

**1. Ключи всегда в двойных кавычках:**
```json
✅ {"name": "Project"}
❌ {name: "Project"}        ← без кавычек
❌ {'name': "Project"}      ← одинарные кавычки
```

**2. Строки только в двойных кавычках:**
```json
✅ {"name": "Project"}
❌ {"name": 'Project'}      ← одинарные кавычки
```

**3. Запятая между элементами:**
```json
✅ {"name": "A", "id": 1}
❌ {"name": "A" "id": 1}    ← нет запятой
```

**4. НЕТ запятой после последнего элемента:**
```json
✅ {"name": "A", "id": 1}
❌ {"name": "A", "id": 1,}  ← лишняя запятая
```

**5. Нет комментариев:**
```json
❌ {
  // это комментарий - НЕ РАБОТАЕТ в JSON!
  "name": "Project"
}
```

---

## 🎯 Примеры для EngineCamPro

### Один проект

```json
{
  "id": 123,
  "name": "My Engine Project",
  "description": "High-performance street engine",
  "created_at": "2025-01-15",
  "owner_id": 456,
  "is_public": false
}
```

**Читается:**
- Проект с ID 123
- Название "My Engine Project"
- Описание есть
- Создан 15 января 2025
- Владелец - пользователь 456
- Приватный проект (не публичный)

---

### Один кулачок

```json
{
  "id": 789,
  "project_id": 123,
  "name": "Aggressive Street Cam",
  "type": "intake",
  "lift": 11.5,
  "duration": 280,
  "lobe_separation": 110,
  "advance": 4,
  "created_at": "2025-01-20"
}
```

**Читается:**
- Кулачок с ID 789
- Принадлежит проекту 123
- Название "Aggressive Street Cam"
- Тип: впускной (intake)
- Подъём 11.5 мм
- Продолжительность 280 градусов
- И так далее...

---

### Список проектов (массив объектов)

```json
[
  {
    "id": 1,
    "name": "Project A",
    "cams_count": 2
  },
  {
    "id": 2,
    "name": "Project B",
    "cams_count": 4
  },
  {
    "id": 3,
    "name": "Project C",
    "cams_count": 1
  }
]
```

**Читается:**
- Массив из трёх проектов
- Каждый проект - объект со своими данными

---

### Результат расчёта (сложная структура)

```json
{
  "cam_id": 789,
  "calculated_at": "2025-01-20T14:30:00Z",
  "profile": {
    "points": [
      {"angle": 0, "lift": 0.0},
      {"angle": 10, "lift": 0.5},
      {"angle": 20, "lift": 1.2},
      {"angle": 30, "lift": 2.1}
    ],
    "max_velocity": 0.0234,
    "max_acceleration": 0.0012,
    "peak_lift_angle": 108
  },
  "warnings": [
    "High acceleration detected",
    "Check valve spring rate"
  ],
  "is_valid": true
}
```

**Читается:**
- Расчёт для кулачка 789
- Время расчёта указано
- Профиль содержит:
  - Массив точек (угол, подъём)
  - Максимальная скорость
  - Максимальное ускорение
  - Угол пикового подъёма
- Есть предупреждения (массив строк)
- Результат валидный

---

## 🔗 Связь с HTTP (урок 1.2)

### JSON в HTTP запросах и ответах

Вспоминаем из урока 1.2 - HTTP запрос/ответ имеет **тело (body)**.

**Именно в теле передаётся JSON!**

### Пример: Создание проекта

**HTTP Запрос:**
```
POST /api/projects
Content-Type: application/json

{
  "name": "My New Project",
  "description": "High-performance engine"
}
```

**HTTP Ответ:**
```
201 Created
Content-Type: application/json

{
  "id": 124,
  "name": "My New Project",
  "description": "High-performance engine",
  "created_at": "2025-01-20T14:30:00Z"
}
```

**Что происходит:**
1. Client отправляет JSON в теле POST запроса
2. Server получает JSON, парсит (читает) его
3. Server создаёт проект в базе данных
4. Server возвращает JSON с данными созданного проекта

---

### Заголовок Content-Type

**Важно!** Всегда указывай тип содержимого:

```
Content-Type: application/json
```

Это говорит: "В теле запроса/ответа находится JSON"

Без этого заголовка сервер может не понять что ты отправил JSON.

---

## 🎨 Визуализация: JSON vs другие форматы

### Те же данные в разных форматах:

**JSON:**
```json
{
  "name": "Ivan",
  "age": 30,
  "city": "Moscow"
}
```

**XML (старый формат):**
```xml
<person>
  <name>Ivan</name>
  <age>30</age>
  <city>Moscow</city>
</person>
```

**CSV (табличный формат):**
```csv
name,age,city
Ivan,30,Moscow
```

**Почему JSON популярнее:**
- ✅ Короче чем XML
- ✅ Структурированнее чем CSV
- ✅ Легко читается
- ✅ Поддержка вложенности
- ✅ Нативная поддержка в JavaScript

---

## 📝 Ключевые термины

### JSON (JavaScript Object Notation)
**Что:** Текстовый формат для структурированных данных  
**Зачем:** Универсальный способ обмена данными между программами  
**Формат:** Объекты `{}` и массивы `[]`

### Объект (Object)
**Что:** Набор пар "ключ": значение в фигурных скобках  
**Пример:** `{"name": "Project", "id": 1}`  
**Аналогия:** Словарь с определениями

### Массив (Array)
**Что:** Упорядоченный список значений в квадратных скобках  
**Пример:** `[1, 2, 3]` или `["A", "B", "C"]`  
**Аналогия:** Список покупок

### Ключ (Key)
**Что:** Название поля в объекте  
**Правило:** Всегда в двойных кавычках  
**Пример:** `"name"` в `{"name": "Project"}`

### Значение (Value)
**Что:** Данные, соответствующие ключу  
**Типы:** String, Number, Boolean, null, Array, Object  
**Пример:** `"Project"` в `{"name": "Project"}`

### Content-Type
**Что:** HTTP заголовок указывающий тип содержимого  
**Для JSON:** `application/json`  
**Зачем:** Чтобы сервер знал что в теле - JSON

---

## ✅ Критерии завершения урока

Отметь когда выполнено:

- [ ] **Понимание JSON**
  - Могу объяснить что такое JSON
  - Понимаю зачем он нужен для Client-Server
  - Знаю что JSON - это текстовый формат

- [ ] **Структура JSON**
  - Понимаю разницу между объектом `{}` и массивом `[]`
  - Знаю синтаксис (кавычки, запятые, двоеточия)
  - Могу прочитать JSON и понять структуру

- [ ] **Типы данных**
  - Знаю все 6 типов: String, Number, Boolean, null, Array, Object
  - Понимаю разницу между `null`, `""` и `0`
  - Понимаю что число `11.5` не то же самое что строка `"11.5"`

- [ ] **Связь с HTTP**
  - Понимаю что JSON передаётся в теле HTTP запроса/ответа
  - Знаю про заголовок Content-Type
  - Вижу полную картину: Client → HTTP → JSON → Server

- [ ] **Применение к проекту**
  - Представляю как данные EngineCamPro выглядят в JSON
  - Понимаю как будут структурированы проекты и кулачки
  - Могу описать JSON для результата расчёта

- [ ] **Документирование**
  - Записал ключевые моменты в `notes/insights.md`
  - Если были вопросы - записал в `notes/questions.md`

---

## 📝 Вопросы для самопроверки

Ответь на эти вопросы (устно или письменно):

1. **Что такое JSON?**
   - Язык программирования или формат данных?
   - Зачем он нужен?
   - Почему именно JSON, а не другой формат?

2. **Структура JSON:**
   - В чём разница между `{}` и `[]`?
   - Что такое "ключ" и "значение"?
   - Почему ключи в кавычках, а числа без кавычек?

3. **Типы данных:**
   - Какие 6 типов данных есть в JSON?
   - Чем `null` отличается от `""`?
   - Чем число `0` отличается от `null`?
   - Что будет если написать `"11.5"` вместо `11.5`?

4. **Синтаксис:**
   - Где ставятся запятые?
   - Нужна ли запятая после последнего элемента?
   - Можно ли использовать одинарные кавычки?
   - Можно ли добавлять комментарии в JSON?

5. **Для EngineCamPro:**
   - Как будет выглядеть проект в JSON?
   - Как будет выглядеть кулачок в JSON?
   - Как передать массив точек профиля?
   - Какой заголовок нужен для отправки JSON?

6. **Связь с HTTP:**
   - Где в HTTP запросе находится JSON?
   - Как сервер понимает что в теле JSON?
   - Что происходит с JSON на сервере?

---

## 🔗 Связь с другими уроками

**Предыдущие уроки:**
- **1.1 Client-Server** - узнали КТО общается
- **1.2 HTTP** - узнали КАК общаются (протокол)
- **1.3 JSON** - узнали ЧТО передают (формат данных)

**Полная картина:**
```
Client                    Server
  │                          │
  │   HTTP POST запрос       │
  │   Content-Type: json     │
  │   Body: {"name": "..."}  │
  ├─────────────────────────►│
  │                          │
  │                          │ Парсит JSON
  │                          │ Создаёт в БД
  │                          │
  │   HTTP 201 Created       │
  │   Content-Type: json     │
  │   Body: {"id": 123}      │
  │◄─────────────────────────┤
  │                          │
```

**Следующий урок:** 1.4 REST API концепции
- Узнаешь КАК ПРАВИЛЬНО проектировать пути API
- Принципы REST
- Best practices для URL и методов
- Всё соберётся в единую картину!

---

## 💡 Итоговые выводы

**Что я понял из этого урока:**

1. **JSON - универсальный язык данных**:
   - Понимают все языки программирования
   - Текстовый формат, легко передаётся по HTTP
   - Структурированный и читабельный

2. **Две основные структуры**:
   - Объект `{}` - набор пар ключ:значение
   - Массив `[]` - упорядоченный список

3. **Шесть типов данных**:
   - String, Number, Boolean, null, Array, Object
   - Каждый для своих задач
   - Важно понимать разницу (особенно число vs строка)

4. **JSON + HTTP = обмен данными**:
   - JSON в теле HTTP запроса/ответа
   - Заголовок Content-Type указывает формат
   - Client и Server обмениваются через JSON

5. **Для моего проекта**:
   - Все данные EngineCamPro будут в JSON
   - Проекты, кулачки, результаты расчётов
   - Frontend отправляет JSON, Backend отвечает JSON

---

## 📚 Дополнительные материалы (опционально)

**Если хочешь углубиться:**

- [JSON.org](https://www.json.org/json-ru.html) - официальная спецификация
- [JSON Formatter](https://jsonformatter.org/) - онлайн валидатор JSON
- [MDN JSON](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON) - подробное руководство

**НО!** Это не обязательно. Главное - понять концепции из этого урока.

---

**Статус урока:** ⏳ Не начат / 🔄 В процессе / ✅ Завершён  
**Дата начала:** _________  
**Дата завершения:** _________  
**Время изучения:** _________ минут

---

*Версия урока: 1.0*  
*Дата создания: 10 октября 2025*
