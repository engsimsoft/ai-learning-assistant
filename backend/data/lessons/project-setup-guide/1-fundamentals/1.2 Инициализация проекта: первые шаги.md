# 1.2 Инициализация проекта: первые шаги

#### 🎯 Зачем нужна правильная инициализация

**Проблема хаотичного старта:**
- Начинаешь писать код в корневой папке без структуры
- Забываешь про Git → теряешь историю изменений
- Секреты (API ключи) попадают в Git
- Virtual environment не создан → конфликты пакетов
- Через неделю не помнишь как запустить проект

**Правильная инициализация даёт:**
- ✅ Чистая структура с первого дня
- ✅ Git отслеживает все изменения с самого начала
- ✅ Изолированное окружение (venv) → нет конфликтов
- ✅ Секреты защищены (.gitignore)
- ✅ README.md → всегда знаешь как запустить
- ✅ ИИ лучше понимает структуру проекта

---

#### 🏪 Аналогия: Строительство дома

**Хаотичный старт** = начать строить дом без фундамента:
- Стены кривые, нет плана
- Через месяц не помнишь где провода
- Пристройка невозможна

**Правильная инициализация** = заложить фундамент и план:
- Чертежи готовы (структура папок)
- Коммуникации проведены (Git, venv, .env)
- Инструкция есть (README.md)
- Можно строить дальше без проблем

---

#### 📐 Визуализация: Шаги правильной инициализации

> **Что такое ASCII схема?** Это рисунок из текстовых символов - стрелок, линий, рамок. Мы используем их чтобы показать процессы и связи наглядно, прямо в тексте. Это как блок-схема, но нарисованная символами ┌─┐│└┘↓.

```
┌─────────────────────────────────────────────────────────┐
│            ШАГ 1: Создание папки проекта                │
│                                                          │
│  mkdir my-project && cd my-project                      │
│                                                          │
│  ЗАЧЕМ: Изолировать проект от других файлов             │
└─────────────────────────────────────────────────────────┘
                         ↓
┌─────────────────────────────────────────────────────────┐
│         ШАГ 2: Git инициализация (сразу!)               │
│                                                          │
│  git init                                               │
│                                                          │
│  ЗАЧЕМ: Отслеживать изменения с первого файла           │
└─────────────────────────────────────────────────────────┘
                         ↓
        ┌────────────────┴────────────────┐
        │                                  │
┌───────▼──────────┐            ┌─────────▼─────────┐
│  Python проект   │            │  Node.js проект   │
└───────┬──────────┘            └─────────┬─────────┘
        │                                  │
        ↓                                  ↓
┌─────────────────────────────────┐ ┌─────────────────────────────────┐
│ ШАГ 3a: Virtual Environment     │ │ ШАГ 3b: npm инициализация       │
│                                 │ │                                 │
│ python -m venv venv             │ │ npm create vite@latest          │
│ source venv/bin/activate        │ │ или                             │
│                                 │ │ npx create-next-app@latest      │
│ ЗАЧЕМ: Изолировать зависимости │ │                                 │
│ этого проекта от системы        │ │ ЗАЧЕМ: Создать структуру        │
└─────────────────┬───────────────┘ └─────────────────┬───────────────┘
                  │                                   │
                  ↓                                   ↓
┌─────────────────────────────────┐ ┌─────────────────────────────────┐
│ ШАГ 4a: Установка зависимостей │ │ ШАГ 4b: Установка зависимостей │
│                                 │ │                                 │
│ pip install fastapi uvicorn     │ │ npm install                     │
│ pip freeze > requirements.txt   │ │                                 │
│                                 │ │ ЗАЧЕМ: package.json уже создан  │
│ ЗАЧЕМ: Зафиксировать версии     │ │ автоматически                   │
└─────────────────┬───────────────┘ └─────────────────┬───────────────┘
                  │                                   │
                  └────────────────┬──────────────────┘
                                   ↓
┌─────────────────────────────────────────────────────────┐
│              ШАГ 5: .gitignore создание                 │
│                                                          │
│  Добавляем файлы которые НЕ должны попасть в Git:       │
│  - venv/ или node_modules/                              │
│  - .env (секреты!)                                      │
│  - __pycache__/ или .next/                              │
│  - *.pyc, .DS_Store                                     │
│                                                          │
│  ЗАЧЕМ: Защитить секреты и не загружать мусор в Git    │
└─────────────────────────────────────────────────────────┘
                         ↓
┌─────────────────────────────────────────────────────────┐
│               ШАГ 6: README.md создание                 │
│                                                          │
│  # Project Name                                         │
│  ## Описание                                            │
│  ## Установка                                           │
│  ## Запуск                                              │
│                                                          │
│  ЗАЧЕМ: Через 3 месяца вспомнишь как запустить          │
└─────────────────────────────────────────────────────────┘
                         ↓
┌─────────────────────────────────────────────────────────┐
│             ШАГ 7: Первый коммит в Git                  │
│                                                          │
│  git add .                                              │
│  git commit -m "Initial commit: project setup"          │
│                                                          │
│  ЗАЧЕМ: Зафиксировать начальную структуру               │
└─────────────────────────────────────────────────────────┘
                         ↓
                    ✅ ГОТОВО!
           Проект инициализирован правильно
```

---

#### 💡 Как это работает: Python проект (FastAPI)

**Последовательность команд:**

```bash
# 1. Создаём папку проекта
mkdir enginecampro-v2
cd enginecampro-v2

# 2. Git инициализация (СРАЗУ!)
git init

# 3. Virtual Environment (изоляция зависимостей)
python -m venv venv

# 4. Активация venv
# macOS/Linux:
source venv/bin/activate
# Windows:
venv\Scripts\activate

# 5. Установка зависимостей
pip install fastapi uvicorn sqlalchemy pydantic

# 6. Фиксация зависимостей
pip freeze > requirements.txt

# 7. Создание .gitignore
touch .gitignore
# Добавить: venv/, .env, __pycache__/, *.pyc

# 8. Создание README.md
touch README.md
# Заполнить базовой информацией

# 9. Первый коммит
git add .
git commit -m "Initial commit: FastAPI project setup"
```

**Зачем каждый шаг:**

**Virtual Environment (venv):**
- Проблема: Пакеты устанавливаются глобально → конфликты между проектами
- Решение: venv создаёт изолированное окружение → пакеты только для этого проекта
- Аналогия: У каждого проекта своя коробка с инструментами

**requirements.txt:**
- Проблема: Коллега не знает какие пакеты установить
- Решение: `pip freeze > requirements.txt` → список всех зависимостей с версиями
- Другой разработчик: `pip install -r requirements.txt` → идентичное окружение

**.gitignore:**
- Проблема: `venv/` весит 100MB, `.env` содержит секреты
- Решение: `.gitignore` → Git игнорирует эти файлы
- Безопасность: API ключи не попадут в публичный репозиторий

---

#### 💡 Как это работает: Node.js проект (React/Next.js)

**Вариант 1: React с Vite**

```bash
# 1. Создание проекта (Vite делает всё за тебя)
npm create vite@latest enginecampro-frontend

# Выбираешь:
# - Framework: React
# - Variant: TypeScript

cd enginecampro-frontend

# 2. Установка зависимостей
npm install

# 3. Git уже инициализирован автоматически!
# .gitignore уже создан!

# 4. Обнови README.md
# Добавь описание проекта

# 5. Первый коммит
git add .
git commit -m "Initial commit: React + Vite setup"
```

**Вариант 2: Next.js**

```bash
# 1. Создание проекта
npx create-next-app@latest enginecampro-app

# Выбираешь:
# - TypeScript: Yes
# - Tailwind CSS: Yes
# - App Router: Yes

cd enginecampro-app

# 2. Зависимости уже установлены автоматически!
# 3. Git уже инициализирован!
# 4. .gitignore уже создан!

# 5. Обнови README.md
# 6. Первый коммит
git add .
git commit -m "Initial commit: Next.js setup"
```

**Зачем Node.js инструменты делают это автоматически:**
- Vite/Next.js → batteries included подход
- Создают структуру, .gitignore, package.json автоматически
- Ты концентрируешься на коде, не на настройке

---

#### ✅ Best Practices

**1. Git init СРАЗУ**
```bash
✅ mkdir project && cd project && git init
❌ Писать код неделю, потом вспомнить про Git
```
ЗАЧЕМ: История изменений с первого файла. Можно откатить любые изменения.

**2. README.md с первого дня**
```markdown
✅ # EngineCamPro v2
   ## Описание
   Веб-приложение для расчёта профилей кулачков

   ## Установка
   1. python -m venv venv
   2. source venv/bin/activate
   3. pip install -r requirements.txt

   ## Запуск
   uvicorn app.main:app --reload

❌ README.md отсутствует
```
ЗАЧЕМ: Через 3 месяца забудешь команды. README → шпаргалка для себя и других.

**3. .env.example для секретов**
```bash
✅ Создай .env.example (публичный шаблон)
   DATABASE_URL=your_database_url_here
   SECRET_KEY=your_secret_key_here

   И .env (реальные секреты, в .gitignore)
   DATABASE_URL=postgresql://...
   SECRET_KEY=super-secret-123

❌ Хардкодить секреты в коде
   SECRET_KEY = "super-secret-123"  # ❌ НЕ ДЕЛАЙ ТАК!
```
ЗАЧЕМ: .env.example показывает какие переменные нужны. .env не попадает в Git.

**4. requirements.txt актуален**
```bash
✅ После установки нового пакета:
   pip install pandas
   pip freeze > requirements.txt

❌ Забыть обновить requirements.txt
```
ЗАЧЕМ: Другой разработчик сможет установить все зависимости точно.

**5. Первый коммит - структура**
```bash
✅ git commit -m "Initial commit: project setup"
   Коммит содержит:
   - README.md
   - .gitignore
   - requirements.txt / package.json
   - Базовую структуру папок

❌ git commit -m "stuff"
```
ЗАЧЕМ: Чистая точка старта. Можно вернуться к начальной структуре.

---

#### 🤖 Диалог с Claude Code

**❌ Плохой диалог:**

```
Ты: Создай мне проект

Claude Code: Какой проект? Какой стек? Какая структура?

Ты: FastAPI

Claude Code: [создаёт app.py в корне, без структуры]
```

**Почему плохо:**
- Нет деталей о структуре
- ИИ не понимает контекст
- Получаешь монолит в одном файле
- Нет .gitignore, README.md
- Нет инициализации Git и venv

---

**✅ Хороший диалог:**

```
Ты: Создай FastAPI проект "EngineCamPro v2" для расчётов кулачков.

КОНТЕКСТ:
Веб-приложение с REST API для инженерных расчётов. 
Backend на FastAPI, в будущем будет React frontend.

СТРУКТУРА проекта:

enginecampro-v2/
├── app/
│   ├── main.py           # Entry point
│   ├── routers/          # API endpoints
│   ├── services/         # Бизнес-логика расчётов
│   ├── models/           # SQLAlchemy модели
│   ├── schemas/          # Pydantic схемы
│   └── core/             # Конфиги, математика
├── tests/                # Тесты
├── .gitignore            # venv, .env, __pycache__
├── .env.example          # Шаблон переменных окружения
├── README.md             # Установка и запуск
└── requirements.txt      # Зависимости

ЗАЧЕМ такая структура:
- app/routers/ → HTTP логика отдельно
- app/services/ → Математика изолирована, можно тестировать
- app/core/ → Конфиги в одном месте
- Layered Architecture (слои не смешиваются)

ТРЕБОВАНИЯ:
1. Создай .gitignore для Python:
   ЗАЧЕМ: Не заливать venv/, .env, __pycache__/ в Git

2. Создай README.md с инструкциями:
   - Установка (venv, requirements.txt)
   - Запуск (uvicorn command)
   ЗАЧЕМ: Документация с первого дня

3. Создай .env.example:
   DATABASE_URL=
   SECRET_KEY=
   ЗАЧЕМ: Показать какие переменные нужны

4. Создай requirements.txt с:
   - fastapi
   - uvicorn[standard]
   - sqlalchemy
   - pydantic
   ЗАЧЕМ: Зафиксировать зависимости

5. Создай базовый app/main.py с:
   - FastAPI app instance
   - CORS middleware
   - Health check endpoint GET /health
   ЗАЧЕМ: Проверить что всё работает

6. Инициализируй Git:
   git init
   git add .
   git commit -m "Initial commit: FastAPI project setup"
   ЗАЧЕМ: История изменений с первого файла

Claude Code: 
[создаёт правильную структуру]
[создаёт все файлы]
[инициализирует Git]
[делает первый коммит]

Результат: "✅ Project initialized successfully!"
```

**Почему хорошо:**
- ✅ Детальная структура с объяснением ЗАЧЕМ каждая папка
- ✅ Конкретные требования (Git, .gitignore, README, .env)
- ✅ Объяснение ЗАЧЕМ каждое требование
- ✅ ИИ понимает контекст и цель проекта
- ✅ Получаешь production-ready структуру с первого дня
- ✅ Layered Architecture с самого начала

---

#### ✅ Чек-лист: Проект инициализирован правильно

**Базовая инициализация:**
- [ ] Папка проекта создана с понятным именем
- [ ] Git инициализирован (`git init`)
- [ ] `.gitignore` создан и содержит:
  - Python: `venv/`, `.env`, `__pycache__/`, `*.pyc`
  - Node.js: `node_modules/`, `.env`, `.next/`, `dist/`
- [ ] `README.md` создан с секциями:
  - Описание проекта
  - Установка
  - Запуск
  - (опционально) Структура папок

**Python проект:**
- [ ] Virtual environment создан (`python -m venv venv`)
- [ ] Virtual environment активирован
- [ ] Зависимости установлены
- [ ] `requirements.txt` создан (`pip freeze > requirements.txt`)
- [ ] `.env.example` создан (если нужны секреты)

**Node.js проект:**
- [ ] Проект создан через `npm create vite` или `npx create-next-app`
- [ ] `package.json` существует
- [ ] Зависимости установлены (`npm install`)
- [ ] `.env.local` или `.env.example` создан (если нужны секреты)

**Первый коммит:**
- [ ] Все файлы добавлены в Git (`git add .`)
- [ ] Первый коммит сделан (`git commit -m "Initial commit: project setup"`)
- [ ] `.env` (реальные секреты) НЕ попал в Git

**Проверка работоспособности:**
- [ ] Проект запускается без ошибок
  - Python: `uvicorn app.main:app --reload` работает
  - Node.js: `npm run dev` работает
- [ ] Health check endpoint отвечает (если API)
- [ ] Главная страница открывается (если frontend)

**Документация:**
- [ ] README.md содержит все команды для запуска
- [ ] Другой человек может склонировать и запустить проект

---

#### 🎯 Связь с EngineCamPro

Когда запускал EngineCamPro v1 на Streamlit, структура была простой:
```
enginecampro/
├── app.py              # Всё в одном файле
├── core/               # Математика
└── requirements.txt
```

Это работало, но при переходе на FastAPI + React нужна правильная инициализация:

```
enginecampro-v2/
├── backend/            # FastAPI проект
│   ├── app/
│   ├── tests/
│   ├── .gitignore
│   ├── README.md
│   └── requirements.txt
├── frontend/           # React проект
│   ├── src/
│   ├── .gitignore
│   ├── README.md
│   └── package.json
└── README.md           # Главный README для монорепы
```

**Зачем такая структура:**
- backend и frontend - отдельные проекты
- У каждого свой .gitignore, README.md, зависимости
- Можно разрабатывать независимо
- Можно деплоить отдельно

---

**Следующий раздел:** 1.3 Dependencies (управление зависимостями)