# ğŸ“š DOCUMENTATION SPEC: 527 ShortCut

> **Project:** 527 ShortCut Championship Website  
> **Tech Stack:** Express + React + Drizzle + PostgreSQL  
> **Status:** Production (https://shortcutcup.ru)  
> **Version:** 1.0 | Updated: 2025-10-29

---

## ğŸ¯ Purpose

Technical specification for maintaining project documentation. Follow these rules when creating/updating any documentation files.

---

## ğŸ“ Current Structure

```
527-shortcut/
â”œâ”€â”€ README.md                    # To refactor: 80-120 lines max
â”œâ”€â”€ .env.example                 # Template (in git)
â”œâ”€â”€ server/                      # Express + TypeScript
â”œâ”€â”€ client/                      # React + Vite
â”œâ”€â”€ shared/schema.ts             # SSOT for types (Drizzle)
â”œâ”€â”€ drizzle/migrations/          # To implement
â””â”€â”€ docs/                        # To create
    â”œâ”€â”€ setup.md
    â”œâ”€â”€ architecture.md
    â”œâ”€â”€ deployment.md
    â”œâ”€â”€ troubleshooting.md
    â”œâ”€â”€ api/endpoints.md
    â”œâ”€â”€ decisions/*.md           # ADRs
    â””â”€â”€ images/*.png
```

---

## Core Principles

### 1. SSOT (Single Source of Truth)

Each piece of information lives in ONE place. Other files reference it.

**Example for 527 ShortCut:**

```markdown
âœ… CORRECT:
README.md: "Database: see docs/architecture.md"
docs/architecture.md: "PostgreSQL 15 on Railway, 9 tables, schema in shared/schema.ts"
docs/deployment.md: "Database setup: see docs/architecture.md"

âŒ WRONG:
README.md: "PostgreSQL 15 on Railway, 9 tables..."
docs/architecture.md: "PostgreSQL 15 on Railway, 9 tables..."
docs/deployment.md: "PostgreSQL 15 on Railway, 9 tables..."
```

### 2. README: 80-120 lines max

**Include:**
- Project description (1-3 sentences)
- Quick Start (3-5 commands)
- Links to docs/
- Tech stack list
- Basic commands

**Exclude:**
- Detailed setup â†’ `docs/setup.md`
- Architecture â†’ `docs/architecture.md`
- API docs â†’ `docs/api/endpoints.md`
- Troubleshooting â†’ `docs/troubleshooting.md`

### 3. Details in docs/

All detailed information goes to `docs/` folder with proper structure.

---

## Document Templates

### docs/setup.md Structure

```markdown
# Setup

## Prerequisites
- Node.js 18+, PostgreSQL 15+

## Backend Setup
1. Install dependencies
2. Configure .env
3. Setup database
4. Run migrations
5. Start server

## Frontend Setup
1. Install dependencies
2. Configure Vite proxy
3. Start dev server

## Verification
- Check endpoints work
- Link to troubleshooting.md
```

### docs/architecture.md Structure

```markdown
# Architecture

## System Diagram
[ASCII diagram of Express + React + PostgreSQL]

## Tech Stack
- Backend: Express + TypeScript + Drizzle
- Frontend: React + Vite
- Database: PostgreSQL on Railway

## Database Schema
- 9 tables (see shared/schema.ts)
- Key relations

## Data Flow
User â†’ React â†’ Express â†’ PostgreSQL â†’ Response

## Shared Types (SSOT)
shared/schema.ts generates types for both backend and frontend

## Known Issues
- Link to critical issues from analysis
- Link to refactoring plan
```

### ADR Template (docs/decisions/template.md)

```markdown
# ADR XXX: [Title]

**Date:** YYYY-MM-DD
**Status:** Accepted | Rejected | Deprecated
**Author:** Name

## Context
What problem needs solving?

## Decision
What we decided to do.

## Reasons
1. Reason 1
2. Reason 2

## Consequences
**Pros:**
- Pro 1

**Cons:**
- Con 1

## Alternatives
What else was considered and why rejected?
```

---

## Checklist

### Before Creating/Updating Documentation

- [ ] Check: does this info already exist elsewhere? (avoid duplication)
- [ ] Decide: README or docs/?
- [ ] Use links instead of copying (SSOT)
- [ ] Update "Last updated" date after changes

### README.md Rules

- [ ] Size: 80-120 lines
- [ ] Has: description, Quick Start, links to docs/, tech stack
- [ ] NO: detailed setup, architecture, API docs, troubleshooting

### When Code Changes

- [ ] New API endpoint â†’ update `docs/api/endpoints.md`
- [ ] Refactoring â†’ update `docs/architecture.md`
- [ ] Bug fix â†’ add to `docs/troubleshooting.md`
- [ ] Important decision â†’ create ADR in `docs/decisions/`
- [ ] Database schema change â†’ regenerate types, update docs

### ADR Creation

- [ ] Use sequential numbering (001, 002, 003...)
- [ ] Include: date, status, context, decision, reasons, consequences, alternatives
- [ ] Link from architecture.md

---

## Critical Rules

### DON'T
- Duplicate information across files
- Exceed 120 lines in README
- Forget to update docs when code changes
- Use absolute paths (use relative)
- Include secrets in documentation

### DO
- Apply SSOT principle
- Keep README compact (80-120 lines)
- Use ASCII diagrams for schemas
- Create ADRs for important decisions
- Update docs when refactoring code

---

## Implementation Priorities

### NOW (after code refactoring):
1. Create `docs/` structure
2. Create `docs/setup.md`, `docs/architecture.md`, `docs/deployment.md`
3. Refactor README.md to 80-120 lines
4. Create ADRs: 001-why-express.md, 002-why-railway.md, 003-shared-schema.md

### LATER:
4. Create `docs/troubleshooting.md`
5. Create `docs/api/endpoints.md`
6. Add diagrams to `docs/images/`

---

**Version:** 1.0  
**Last Updated:** 2025-10-29  
**Project:** 527 ShortCut Championship Website
