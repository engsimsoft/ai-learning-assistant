# 4.2 –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Backend (Express + TypeScript)

> **–í—Ä–µ–º—è –∏–∑—É—á–µ–Ω–∏—è:** 40-50 –º–∏–Ω—É—Ç  
> **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠ê –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —É—Ä–æ–∫  
> **Prerequisite:** –£—Ä–æ–∫ 4.1 (–≤—ã–±–æ—Ä —Å—Ç–µ–∫–∞), AI Web Learning Module 8.4 (TypeScript —Å Node.js)

---

## üéØ –¶–µ–ª—å —É—Ä–æ–∫–∞

–ù–∞—É—á–∏—Ç—å—Å—è **–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å** Express + TypeScript –ø—Ä–æ–µ–∫—Ç —Å –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –ù–∞—Å—Ç—Ä–æ–∏–º –≤—Å—ë –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ: TypeScript, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, build tools, environment variables.

**–ü–æ—á–µ–º—É —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ:**  
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è = –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ –¥–µ–ø–ª–æ–µ, —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å –∫–æ–º–∞–Ω–¥–æ–π, —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥. –ú—ã —Å–¥–µ–ª–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞.

---

## üèóÔ∏è –ß—Ç–æ –º—ã —Å–æ–∑–¥–∞—ë–º

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ backend —á–∞—Å—Ç–∏

```
project/
‚îú‚îÄ‚îÄ server/                  # Backend –∫–æ–¥ (Express)
‚îÇ   ‚îú‚îÄ‚îÄ index.ts            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ Express –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ routes.ts           # API endpoints
‚îÇ   ‚îî‚îÄ‚îÄ postgres-storage.ts # Database access
‚îÇ
‚îú‚îÄ‚îÄ shared/                  # Shared —Ç–∏–ø—ã (frontend + backend)
‚îÇ   ‚îî‚îÄ‚îÄ schema.ts           # Database schema (SSOT!)
‚îÇ
‚îú‚îÄ‚îÄ package.json            # Dependencies –∏ scripts
‚îú‚îÄ‚îÄ tsconfig.json           # TypeScript –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ build-server.js         # esbuild –¥–ª—è production
‚îú‚îÄ‚îÄ .env                    # Environment variables (–ù–ï –≤ git!)
‚îú‚îÄ‚îÄ .env.example            # –®–∞–±–ª–æ–Ω env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (–≤ git)
‚îî‚îÄ‚îÄ .gitignore              # –ß—Ç–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ git
```

**–ì–ª–∞–≤–Ω—ã–π –ø—Ä–∏–Ω—Ü–∏–ø:**  
Backend –æ—Ç–¥–µ–ª—ë–Ω –æ—Ç frontend. –ö–∞–∂–¥–∞—è —á–∞—Å—Ç—å –∂–∏–≤—ë—Ç –≤ —Å–≤–æ–µ–π –ø–∞–ø–∫–µ.

---

## üìù –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

### 1.1 –°–æ–∑–¥–∞—ë–º –ø–∞–ø–∫—É –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º npm

```bash
# –°–æ–∑–¥–∞—ë–º –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
mkdir my-express-app
cd my-express-app

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º npm –ø—Ä–æ–µ–∫—Ç
npm init -y
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:**  
–°–æ–∑–¥–∞–ª—Å—è —Ñ–∞–π–ª `package.json` - —ç—Ç–æ "–ø–∞—Å–ø–æ—Ä—Ç" —Ç–≤–æ–µ–≥–æ Node.js –ø—Ä–æ–µ–∫—Ç–∞. –í –Ω—ë–º —Ö—Ä–∞–Ω—è—Ç—Å—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –∫–æ–º–∞–Ω–¥—ã.

### 1.2 –ü–µ—Ä–≤—ã–π –≤–∑–≥–ª—è–¥ –Ω–∞ package.json

```json
{
  "name": "my-express-app",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC"
}
```

**–ß—Ç–æ –º—ã –±—É–¥–µ–º –º–µ–Ω—è—Ç—å:**
- `"main"` ‚Üí –∏–∑–º–µ–Ω–∏–º –Ω–∞ `"dist/index.js"` (–ø–æ—Å–ª–µ build)
- `"scripts"` ‚Üí –¥–æ–±–∞–≤–∏–º –∫–æ–º–∞–Ω–¥—ã –¥–ª—è dev –∏ production
- –î–æ–±–∞–≤–∏–º `"type": "module"` –¥–ª—è ES modules

---

## üì¶ –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### 2.1 Production –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–≠—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```bash
npm install express cors dotenv
```

**–ß—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏:**
- `express` - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ (—Å–∞–º —Å–µ—Ä–≤–µ—Ä)
- `cors` - –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Å frontend
- `dotenv` - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å .env —Ñ–∞–π–ª–∞–º–∏

### 2.2 Development –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–≠—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–Ω–µ –Ω—É–∂–Ω—ã –≤ production):

```bash
npm install --save-dev typescript @types/node @types/express @types/cors tsx esbuild
```

**–ß—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏:**
- `typescript` - –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä TypeScript
- `@types/node` - —Ç–∏–ø—ã –¥–ª—è Node.js
- `@types/express` - —Ç–∏–ø—ã –¥–ª—è Express
- `@types/cors` - —Ç–∏–ø—ã –¥–ª—è CORS
- `tsx` - –¥–ª—è –∑–∞–ø—É—Å–∫–∞ TypeScript –Ω–∞–ø—Ä—è–º—É—é (dev —Ä–µ–∂–∏–º)
- `esbuild` - –±—ã—Å—Ç—Ä—ã–π bundler –¥–ª—è production

### 2.3 –ü–æ—á–µ–º—É —Ç–∞–∫ –º–Ω–æ–≥–æ @types –ø–∞–∫–µ—Ç–æ–≤?

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              –ó–∞—á–µ–º –Ω—É–∂–Ω—ã @types –ø–∞–∫–µ—Ç—ã?                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

JavaScript –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (express, cors) –Ω–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ JavaScript.
–û–Ω–∏ –ù–ï –∏–º–µ—é—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–∏–ø–∞—Ö.

TypeScript –Ω–µ –∑–Ω–∞–µ—Ç –∫–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã –µ—Å—Ç—å —É Express:

// ‚ùå TypeScript –Ω–µ –∑–Ω–∞–µ—Ç —á—Ç–æ —Ç–∞–∫–æ–µ express()
const app = express();  // –û—à–∏–±–∫–∞: Cannot find name 'express'

@types –ø–∞–∫–µ—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç —Ç–∏–ø—ã:

// ‚úÖ TypeScript —Ç–µ–ø–µ—Ä—å –∑–Ω–∞–µ—Ç –≤—Å–µ –º–µ—Ç–æ–¥—ã Express
import express from 'express';
const app = express();  // –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç + –∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç –≤ VS Code!
```

**–ê–Ω–∞–ª–æ–≥–∏—è:**  
@types –ø–∞–∫–µ—Ç—ã - —ç—Ç–æ –∫–∞–∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É –Ω–∞ —Ç–≤–æ—ë–º —è–∑—ã–∫–µ. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (express) —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –±–µ–∑ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (@types/express) —Ç—ã –Ω–µ –∑–Ω–∞–µ—à—å –≤—Å–µ –µ–≥–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.

---

## ‚öôÔ∏è –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ TypeScript

### 3.1 –°–æ–∑–¥–∞—ë–º tsconfig.json

```bash
npx tsc --init
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª `tsconfig.json` —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ TypeScript.

### 3.2 –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Express

–ó–∞–º–µ–Ω–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `tsconfig.json` –Ω–∞ —ç—Ç–æ:

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "lib": ["ES2020"],
    "moduleResolution": "node",
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,
    "strict": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "resolveJsonModule": true,
    "outDir": "./dist",
    "rootDir": ".",
    "baseUrl": ".",
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": ["server/**/*", "shared/**/*"],
  "exclude": ["node_modules", "dist", "client"]
}
```

**–í–∞–∂–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

| –û–ø—Ü–∏—è | –ó–∞—á–µ–º |
|-------|-------|
| `"target": "ES2020"` | –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π JavaScript |
| `"module": "ESNext"` | –ò—Å–ø–æ–ª—å–∑—É–µ–º ES modules (import/export) |
| `"strict": true"` | –°—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ (–ª–æ–≤–∏–º –æ—à–∏–±–∫–∏!) |
| `"outDir": "./dist"` | –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –ø–æ–ø–∞–¥—ë—Ç –≤ dist/ |
| `"include": ["server/**/*", "shared/**/*"]` | –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ backend –∫–æ–¥ |
| `"paths": { "@/*": ["./*"] }` | –ú–æ–∂–µ–º –ø–∏—Å–∞—Ç—å `import {} from '@/shared/schema'` |

---

## üìù –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ package.json scripts

### 4.1 –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ production

–û—Ç–∫—Ä–æ–π `package.json` –∏ –∑–∞–º–µ–Ω–∏ —Å–µ–∫—Ü–∏—é `"scripts"`:

```json
{
  "name": "my-express-app",
  "version": "1.0.0",
  "type": "module",
  "main": "dist/index.js",
  "scripts": {
    "dev": "tsx watch server/index.ts",
    "build": "node build-server.js",
    "start": "node dist/index.js",
    "typecheck": "tsc --noEmit"
  },
  "dependencies": {
    "express": "^4.18.2",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1"
  },
  "devDependencies": {
    "typescript": "^5.3.0",
    "@types/node": "^20.10.0",
    "@types/express": "^4.17.21",
    "@types/cors": "^2.8.17",
    "tsx": "^4.7.0",
    "esbuild": "^0.19.11"
  }
}
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥:**

```
npm run dev
‚îî‚îÄ‚îÄ> tsx watch server/index.ts
     ‚îî‚îÄ‚îÄ> –ó–∞–ø—É—Å–∫–∞–µ—Ç TypeScript —Ñ–∞–π–ª –Ω–∞–ø—Ä—è–º—É—é
          watch = –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

npm run build
‚îî‚îÄ‚îÄ> node build-server.js
     ‚îî‚îÄ‚îÄ> –°–æ–±–∏—Ä–∞–µ—Ç production bundle —á–µ—Ä–µ–∑ esbuild

npm start
‚îî‚îÄ‚îÄ> node dist/index.js
     ‚îî‚îÄ‚îÄ> –ó–∞–ø—É—Å–∫–∞–µ—Ç production –≤–µ—Ä—Å–∏—é

npm run typecheck
‚îî‚îÄ‚îÄ> tsc --noEmit
     ‚îî‚îÄ‚îÄ> –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∏–ø—ã –±–µ–∑ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ (–¥–ª—è CI/CD)
```

### 4.2 –ü–æ—á–µ–º—É `"type": "module"`?

```json
"type": "module"
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ES modules (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π JavaScript):

```typescript
// ‚úÖ –° "type": "module"
import express from 'express';
export const app = express();

// ‚ùå –ë–µ–∑ "type": "module" (—Å—Ç–∞—Ä—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å)
const express = require('express');
module.exports = app;
```

**ES modules** - —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≤ Node.js –∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –ò—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ!

---

## üîß –®–∞–≥ 5: Build tool (esbuild)

### 5.1 –ó–∞—á–µ–º –Ω—É–∂–µ–Ω build tool?

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –º—ã –ø–∏—à–µ–º –Ω–∞ TypeScript –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–∞—Ö. –í production –Ω—É–∂–µ–Ω –æ–¥–∏–Ω –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JavaScript —Ñ–∞–π–ª.

**–†–µ—à–µ–Ω–∏–µ:**  
esbuild - –±—ã—Å—Ç—Ä—ã–π bundler, –∫–æ—Ç–æ—Ä—ã–π:
- –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç TypeScript ‚Üí JavaScript
- –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –≤ –æ–¥–∏–Ω
- –ú–∏–Ω–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∫–æ–¥
- **–†–∞–±–æ—Ç–∞–µ—Ç –≤ 100 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ Webpack!**

### 5.2 –°–æ–∑–¥–∞—ë–º build-server.js

–ü—Ä–∏–º–µ—Ä –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ 527 ShortCut (–Ω–µ–º–Ω–æ–≥–æ —É–ø—Ä–æ—â—ë–Ω):

```javascript
// build-server.js
import esbuild from 'esbuild';

await esbuild.build({
  entryPoints: ['server/index.ts'],
  bundle: true,
  platform: 'node',
  target: 'node20',
  format: 'esm',
  outfile: 'dist/index.js',
  external: [
    'pg',           // PostgreSQL driver (–Ω–µ bundle)
    'pg-hstore',
    'drizzle-orm'
  ],
  minify: true,
  sourcemap: true,
});

console.log('‚úÖ Server built successfully!');
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- `entryPoints` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (server/index.ts)
- `bundle: true` - –æ–±—ä–µ–¥–∏–Ω—è–µ–º –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª
- `platform: 'node'` - –¥–ª—è Node.js (–Ω–µ –±—Ä–∞—É–∑–µ—Ä)
- `external` - —ç—Ç–∏ –ø–∞–∫–µ—Ç—ã –Ω–µ bundle (–æ–Ω–∏ –µ—Å—Ç—å –≤ node_modules)
- `minify: true` - —Å–∂–∏–º–∞–µ–º –∫–æ–¥ (–º–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä)
- `outfile` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ dist/index.js

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
`npm run build` —Å–æ–∑–¥–∞—Å—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª `dist/index.js` —Ä–∞–∑–º–µ—Ä–æ–º ~80-100 KB –≤–º–µ—Å—Ç–æ —Å–æ—Ç–µ–Ω —Ñ–∞–π–ª–æ–≤!

---

## üîê –®–∞–≥ 6: Environment Variables

### 6.1 –ó–∞—á–µ–º –Ω—É–∂–Ω—ã .env —Ñ–∞–π–ª—ã?

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–í –∫–æ–¥–µ –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–µ–∫—Ä–µ—Ç–æ–≤ (–ø–∞—Ä–æ–ª–∏ –ë–î, API –∫–ª—é—á–∏):

```typescript
// ‚ùå –ù–ò–ö–û–ì–î–ê —Ç–∞–∫ –Ω–µ –¥–µ–ª–∞–π!
const DATABASE_URL = "postgres://user:password123@localhost:5432/db";
```

**–ï—Å–ª–∏ —ç—Ç–æ—Ç –∫–æ–¥ –ø–æ–ø–∞–¥—ë—Ç –≤ git ‚Üí –ø–∞—Ä–æ–ª—å —É–∫—Ä–∞–¥—É—Ç!**

**–†–µ—à–µ–Ω–∏–µ:**  
–°–µ–∫—Ä–µ—Ç—ã –≤ `.env` —Ñ–∞–π–ª–µ (–Ω–µ –≤ git):

```env
# .env
DATABASE_URL=postgres://user:password123@localhost:5432/db
PORT=3000
NODE_ENV=development
```

### 6.2 –°–æ–∑–¥–∞—ë–º .env –∏ .env.example

**–§–∞–π–ª .env** (–ù–ï –≤ git, —Å–µ–∫—Ä–µ—Ç—ã –∑–¥–µ—Å—å):

```env
# .env
DATABASE_URL=postgres://postgres:777@localhost:5432/myapp
PORT=3000
NODE_ENV=development
```

**–§–∞–π–ª .env.example** (–í git, —à–∞–±–ª–æ–Ω –±–µ–∑ —Å–µ–∫—Ä–µ—Ç–æ–≤):

```env
# .env.example
DATABASE_URL=postgres://user:password@localhost:5432/database
PORT=3000
NODE_ENV=development
```

**–í–∞–∂–Ω–æ:**  
- `.env` –¥–æ–±–∞–≤—å –≤ `.gitignore` (—á—Ç–æ–±—ã –Ω–µ –ø–æ–ø–∞–ª –≤ git)
- `.env.example` –¥–æ–±–∞–≤—å –≤ git (—á—Ç–æ–±—ã –∫–æ–º–∞–Ω–¥–∞ –∑–Ω–∞–ª–∞ –∫–∞–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω—É–∂–Ω—ã)

### 6.3 –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

```typescript
// server/index.ts
import dotenv from 'dotenv';

// –ó–∞–≥—Ä—É–∂–∞–µ–º .env —Ñ–∞–π–ª
dotenv.config();

// –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
const PORT = process.env.PORT || 3000;
const DATABASE_URL = process.env.DATABASE_URL;

console.log(`Server starting on port ${PORT}`);
```

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. `dotenv.config()` —á–∏—Ç–∞–µ—Ç `.env` —Ñ–∞–π–ª
2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ `process.env`
3. –ú–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `process.env.PORT`, `process.env.DATABASE_URL`

---

## üéØ –®–∞–≥ 7: –ü–µ—Ä–≤—ã–π Express —Å–µ—Ä–≤–µ—Ä

### 7.1 –°–æ–∑–¥–∞—ë–º server/index.ts

```typescript
// server/index.ts
import express from 'express';
import cors from 'cors';
import dotenv from 'dotenv';

// –ó–∞–≥—Ä—É–∂–∞–µ–º environment variables
dotenv.config();

// –°–æ–∑–¥–∞—ë–º Express –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
const app = express();
const PORT = process.env.PORT || 3000;

// Middleware
app.use(cors());              // –†–∞–∑—Ä–µ—à–∞–µ–º –∑–∞–ø—Ä–æ—Å—ã —Å –¥—Ä—É–≥–∏—Ö –¥–æ–º–µ–Ω–æ–≤
app.use(express.json());      // –ü–∞—Ä—Å–∏–º JSON –≤ body –∑–∞–ø—Ä–æ—Å–æ–≤

// –ü—Ä–æ—Å—Ç–æ–π endpoint –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
app.get('/api/health', (req, res) => {
  res.json({ 
    status: 'ok',
    message: 'Server is running!',
    timestamp: new Date().toISOString()
  });
});

// –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä
app.listen(PORT, () => {
  console.log(`‚úÖ Server running on http://localhost:${PORT}`);
  console.log(`üìä Health check: http://localhost:${PORT}/api/health`);
});
```

### 7.2 –ó–∞–ø—É—Å–∫–∞–µ–º!

```bash
npm run dev
```

**–¢—ã —É–≤–∏–¥–∏—à—å:**
```
‚úÖ Server running on http://localhost:3000
üìä Health check: http://localhost:3000/api/health
```

**–ü—Ä–æ–≤–µ—Ä—è–µ–º –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**  
–û—Ç–∫—Ä–æ–π `http://localhost:3000/api/health`

–î–æ–ª–∂–µ–Ω —É–≤–∏–¥–µ—Ç—å:
```json
{
  "status": "ok",
  "message": "Server is running!",
  "timestamp": "2025-10-29T12:00:00.000Z"
}
```

üéâ **Express —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç!**

---

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –∏–∑ 527 ShortCut

–î–∞–≤–∞–π –ø–æ—Å–º–æ—Ç—Ä–∏–º –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º production –ø—Ä–æ–µ–∫—Ç–µ.

### package.json –∏–∑ 527 ShortCut

```json
{
  "name": "527shortcut",
  "type": "module",
  "scripts": {
    "dev": "tsx watch server/index.ts",
    "build": "node build-server.js && vite build",
    "start": "node dist/index.js",
    "db:push": "drizzle-kit push",
    "db:generate": "drizzle-kit generate",
    "db:migrate": "drizzle-kit migrate"
  },
  "dependencies": {
    "express": "^4.18.2",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "drizzle-orm": "^0.29.1",
    "postgres": "^3.4.3"
  },
  "devDependencies": {
    "typescript": "^5.3.3",
    "@types/express": "^4.17.21",
    "@types/cors": "^2.8.17",
    "tsx": "^4.7.0",
    "esbuild": "^0.19.11",
    "drizzle-kit": "^0.20.6"
  }
}
```

**–ß—Ç–æ —Ö–æ—Ä–æ—à–æ:**
- ‚úÖ `"type": "module"` - ES modules
- ‚úÖ `tsx watch` –¥–ª—è development
- ‚úÖ `esbuild` –¥–ª—è production build
- ‚úÖ –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ë–î (`db:push`, `db:migrate`)

**–ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å:**
- ‚ö†Ô∏è `"build"` –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç backend –∏ frontend (`&& vite build`)
  - –õ—É—á—à–µ —Ä–∞–∑–¥–µ–ª–∏—Ç—å: `"build:server"` –∏ `"build:client"`
  - –ü—Ä–æ—â–µ debugging –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö build

---

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### –û—à–∏–±–∫–∞ 1: –ó–∞–±—ã–ª –¥–æ–±–∞–≤–∏—Ç—å "type": "module"

```json
// ‚ùå –ë–µ–∑ "type": "module"
{
  "name": "my-app"
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:**  
`import` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –æ—à–∏–±–∫–∞:  
```
SyntaxError: Cannot use import statement outside a module
```

**–†–µ—à–µ–Ω–∏–µ:**
```json
// ‚úÖ –î–æ–±–∞–≤—å "type": "module"
{
  "name": "my-app",
  "type": "module"
}
```

---

### –û—à–∏–±–∫–∞ 2: .env —Ñ–∞–π–ª –≤ git

```bash
git add .env    # ‚ùå –ù–ò–ö–û–ì–î–ê!
```

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–°–µ–∫—Ä–µ—Ç—ã (–ø–∞—Ä–æ–ª–∏ –ë–î) –ø–æ–ø–∞–¥—É—Ç –≤ –ø—É–±–ª–∏—á–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Üí –≤–∑–ª–æ–º!

**–†–µ—à–µ–Ω–∏–µ:**  
–î–æ–±–∞–≤—å –≤ `.gitignore`:
```
.env
node_modules/
dist/
```

–°–æ–∑–¥–∞–π `.env.example` (–±–µ–∑ —Å–µ–∫—Ä–µ—Ç–æ–≤) –¥–ª—è –∫–æ–º–∞–Ω–¥—ã.

---

### –û—à–∏–±–∫–∞ 3: –ù–µ —É—Å—Ç–∞–Ω–æ–≤–∏–ª @types –ø–∞–∫–µ—Ç—ã

```typescript
import express from 'express';  // ‚ùå –û—à–∏–±–∫–∞: —Ç–∏–ø—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
```

**–ü—Ä–æ–±–ª–µ–º–∞:**  
TypeScript –Ω–µ –∑–Ω–∞–µ—Ç —Ç–∏–ø—ã Express.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
npm install --save-dev @types/express @types/node @types/cors
```

---

### –û—à–∏–±–∫–∞ 4: –ó–∞–±—ã–ª dotenv.config()

```typescript
// ‚ùå –ó–∞–±—ã–ª –∑–∞–≥—Ä—É–∑–∏—Ç—å .env
const PORT = process.env.PORT;  // undefined!
```

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ–º .env –ü–ï–†–ï–î –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
import dotenv from 'dotenv';
dotenv.config();

const PORT = process.env.PORT || 3000;  // –†–∞–±–æ—Ç–∞–µ—Ç!
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –Ω–∞—á–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É, —É–±–µ–¥–∏—Å—å —á—Ç–æ –≤—Å—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:

### –ë–∞–∑–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- [ ] `npm init -y` –≤—ã–ø–æ–ª–Ω–µ–Ω
- [ ] `package.json` –∏–º–µ–µ—Ç `"type": "module"`
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã dependencies (express, cors, dotenv)
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã devDependencies (typescript, @types/*, tsx, esbuild)

### TypeScript –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- [ ] `tsconfig.json` —Å–æ–∑–¥–∞–Ω
- [ ] `"strict": true"` –≤–∫–ª—é—á—ë–Ω (—Å—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤)
- [ ] `"include"` —É–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ server/ –∏ shared/
- [ ] `"outDir": "./dist"` –Ω–∞—Å—Ç—Ä–æ–µ–Ω

### Scripts –≤ package.json
- [ ] `npm run dev` –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å hot reload
- [ ] `npm run build` —Å–æ–±–∏—Ä–∞–µ—Ç production bundle
- [ ] `npm start` –∑–∞–ø—É—Å–∫–∞–µ—Ç production –≤–µ—Ä—Å–∏—é
- [ ] `npm run typecheck` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∏–ø—ã

### Environment Variables
- [ ] `.env` —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω (—Å–µ–∫—Ä–µ—Ç—ã –∑–¥–µ—Å—å)
- [ ] `.env.example` —Å–æ–∑–¥–∞–Ω (—à–∞–±–ª–æ–Ω –¥–ª—è –∫–æ–º–∞–Ω–¥—ã)
- [ ] `.env` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`
- [ ] `dotenv.config()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ index.ts

### Build tool
- [ ] `build-server.js` —Å–æ–∑–¥–∞–Ω —Å esbuild –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- [ ] `npm run build` —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞—ë—Ç dist/index.js
- [ ] Production bundle —Ä–∞–±–æ—Ç–∞–µ—Ç (`npm start`)

### Git
- [ ] `.gitignore` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] `node_modules/`, `dist/`, `.env` –≤ gitignore
- [ ] `.env.example` –≤ git (–¥–ª—è –∫–æ–º–∞–Ω–¥—ã)

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
- [ ] `npm run dev` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] Health check endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] TypeScript —Ç–∏–ø—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è (`npm run typecheck`)

---

## üéì –ò—Ç–æ–≥–∏ —É—Ä–æ–∫–∞

### –ì–ª–∞–≤–Ω—ã–µ –≤—ã–≤–æ–¥—ã

1. **TypeScript –≤–µ–∑–¥–µ** - –Ω–∞—Å—Ç—Ä–æ–π —Å—Ä–∞–∑—É, –Ω–µ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–π
2. **"type": "module"** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π JavaScript (ES modules)
3. **tsx –¥–ª—è dev, esbuild –¥–ª—è production** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
4. **.env –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤** - –ù–ò–ö–û–ì–î–ê –Ω–µ –∫–æ–º–º–∏—Ç—å –≤ git
5. **Build tool –∫—Ä–∏—Ç–∏—á–µ–Ω** - –±–µ–∑ –Ω–µ–≥–æ –¥–µ–ø–ª–æ–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
6. **Scripts –≤ package.json** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥

### –ß—Ç–æ –¥–∞–ª—å—à–µ?

–í —Å–ª–µ–¥—É—é—â–µ–º —É—Ä–æ–∫–µ:
- –°–æ–∑–¥–∞–¥–∏–º –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫ backend
- –†–∞–∑–¥–µ–ª–∏–º –∫–æ–¥ –Ω–∞ —Å–ª–æ–∏ (routes, services, storage)
- –ü–æ–π–º—ë–º –ø–æ—á–µ–º—É 527 ShortCut –Ω–∞—Ä—É—à–∏–ª Layered Architecture

---

## üîó –°—Å—ã–ª–∫–∏ –Ω–∞ –¥—Ä—É–≥–∏–µ —É—Ä–æ–∫–∏

### Project Setup Guide
- ‚Üí **–£—Ä–æ–∫ 1.3** (Dependencies) - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –¥–µ—Ç–∞–ª—å–Ω–æ
- ‚Üí **–£—Ä–æ–∫ 1.5** (Environment Variables) - .env best practices
- ‚Üí **–£—Ä–æ–∫ 1.6** (Git –∏ .gitignore) - —á—Ç–æ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ gitignore
- ‚Üí **–£—Ä–æ–∫ 4.3** (–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ Backend) - —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–∫

### AI Web Learning
- ‚Üí **Module 8.2** (npm package manager) - –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç npm
- ‚Üí **Module 8.4** (TypeScript —Å Node.js) - –¥–µ—Ç–∞–ª–∏ TypeScript
- ‚Üí **Module 8.5** (Build Tools) - Vite, esbuild, Webpack —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

---

## üí° –ó–∞–¥–∞–Ω–∏–µ –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏

**–ó–∞–¥–∞—á–∞:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π Express + TypeScript –ø—Ä–æ–µ–∫—Ç –¥–ª—è —á–∞—Ç-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- Node.js –ø—Ä–æ–µ–∫—Ç —Å TypeScript
- Express —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 4000
- Environment variables –¥–ª—è PORT –∏ WEBSOCKET_SECRET
- Health check endpoint –Ω–∞ `/api/status`
- npm scripts: dev, build, start, typecheck

**–ü–æ–¥—Å–∫–∞–∑–∫–∞:** –°–ª–µ–¥—É–π —á–µ–∫-–ª–∏—Å—Ç—É –∏–∑ —É—Ä–æ–∫–∞!

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
npm run dev
curl http://localhost:4000/api/status
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: {"status":"ok"}
```

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-10-29  
**–ê–≤—Ç–æ—Ä:** AI Web Learning Course
